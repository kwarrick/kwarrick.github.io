---
layout: default
title: segv.me
---

<div id="search">
  <input type="hidden">
</div>

<div id="posts">
  {% for post in site.posts %}
  <div class="post">
    <div class="left">
      <p>Posted on <b>{{ post.date | date_to_string }}</b></p>
      {% for tag in post.tags %}
      <a class="tag">{{ tag }}</a>
      {% endfor %}
    </div>
    <div class="right">
      <h2><a href="{{ post.url }}">{{ post.title }}</a></h2>
      <p>{{ post.content }}</p>
    </div>
  </div>
  {% endfor %}
</div>

<script>
  $(function() {
    $("#search input").select2({
      tags: _.uniq(_.pluck($("a.tag"), "text")),
      placeholder: "Tag Search",
    });

    $("#search .select2-input").attr('tabindex', 1);

    $("#search input").on("change", function() {
      var filter = $("#search input").select2('val');
      if (filter.length == 0) {
        $(".post").show();
      }
      else {
        $(".post").each(function() {
          var tags = _.pluck($(this).find(".tag"), "text");
          if (_.intersection(tags, filter).length > 0) {
            $(this).show();
          }
          else {
            $(this).hide();
          }
        });
      }
    });

    $("a.tag").on("click", function() {
      var tags = $("#search input").select2("val");
      tags.push($(this).text());
      $("#search input").select2('val', tags).trigger("change");
    });
  });
</script>
