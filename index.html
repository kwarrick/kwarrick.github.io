---
layout: default
title: segv.me
---


<div id="search">
  <a id="archive-toggle" href="#" >Archive</a>
  <input type="hidden">
</div>

<div id="archive">
{% for post in site.posts %}
  {% unless post.next %}
    <h2>{{ post.date | date: '%Y' }}</h2>
    <hr />
  {% else %}
    {% capture year %}{{ post.date | date: '%Y' }}{% endcapture %}
    {% capture nyear %}{{ post.next.date | date: '%Y' }}{% endcapture %}
    {% if year != nyear %}
      <h2>{{ post.date | date: '%Y' }}</h2>
      <hr />
    {% endif %}
  {% endunless %}
  <div class="entry">
    <a href="{{ site.baseurl }}{{ post.url }}" title="{{ post.title }}">{{ post.title }}</a>
    <time datetime="{{ post.date | date: '%Y-%m-%d' }}">{{ post.date | date: "%-d %B" }}</time>
    {% for tag in post.tags %}
      <a class="tag">{{ tag }}</a>
    {% endfor %}
    <br class="clear" />
  </div>
{% endfor %}
</div>

<div id="posts">
  {% for post in site.posts %}
  <div class="post">
    <div class="left">
      <p>Posted on <b>{{ post.date | date_to_string }}</b></p>
      <p>
        <a href="{{ post.url }}#disqus_thread"></a>
      </p>
      <p>
      {% for tag in post.tags %}
        <a class="tag">{{ tag }}</a>
      {% endfor %}
      </p>
    </div>
    <div class="right">
      <h2><a href="{{ post.url }}">{{ post.title }}</a></h2>
      {{ post.content }}
    </div>
  </div>
  {% endfor %}
</div>

<script>
  $(function() {
    $("#search input").select2({
      tags: _.uniq(_.pluck($("a.tag"), "text")),
      placeholder: "Tag Search",
    });

    $("#search .select2-input").attr('tabindex', 1);

    $("#search input").on("change", function() {
      var filter = $("#search input").select2('val');
      if (filter.length == 0) {
        $(".post, .entry").show();
      }
      else {
        $(".post, .entry").each(function() {
          var tags = _.pluck($(this).find(".tag"), "text");
          if (_.intersection(tags, filter).length > 0) { $(this).show(); }
          else { $(this).hide(); }
        });
      }
    });

    $("a.tag").on("click", function() {
      var tags = $("#search input").select2("val");
      tags.push($(this).text());
      $("#search input").select2('val', tags).trigger("change");
    });

    $("#archive-toggle").click(function () {
      $("#posts").toggle();
      $("#archive").toggle();
    });
  });
</script>
