<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <title>unpacking a list of items from an array in ruby &middot; warrick.io</title>

    <link rel="stylesheet" href="//warrick.io/css/jane.css">
    <link rel="stylesheet" href="//warrick.io/css/syntax.css">
    <link rel="stylesheet" href="//warrick.io/css/font-awesome.css">


    <link href="" rel="alternate" type="application/rss+xml" title="warrick.io" />
  </head>
  <body>
    
  <h1>unpacking a list of items from an array in ruby</h1>
  <span class="post-date">Mon, Feb 11, 2013</span>
    <p>I often find myself wanting a subset of a dictionary and find it unsightly
syntactically to do a series of element references as it is repetitive and can
make lines very long. Here is the example from the docs, augmented to
demonstrate my meaning:</p>
<div class="highlight"><pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="n">h</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&#34;cat&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;feline&#34;</span><span class="p">,</span> <span class="s2">&#34;dog&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;canine&#34;</span><span class="p">,</span> <span class="s2">&#34;cow&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;bovine&#34;</span><span class="p">,</span> <span class="o">...</span> <span class="p">}</span>
<span class="n">cat</span><span class="p">,</span> <span class="n">dog</span><span class="p">,</span> <span class="n">cow</span> <span class="o">=</span> <span class="n">h</span><span class="o">[</span><span class="s2">&#34;cat&#34;</span><span class="o">]</span><span class="p">,</span> <span class="n">h</span><span class="o">[</span><span class="s2">&#34;dog&#34;</span><span class="o">]</span><span class="p">,</span> <span class="n">h</span><span class="o">[</span><span class="s2">&#34;cow&#34;</span><span class="o">]</span></code></pre></div>
<p>Hashes of course have the select method allowing you to do something a little
less repetitive, but certainly not any less concise in this case, and it still
doesn&rsquo;t help us unpack the values.</p>
<div class="highlight"><pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="n">h</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="sx">%w{cat dog cow}</span><span class="o">.</span><span class="n">include?</span> <span class="n">k</span> <span class="p">}</span>
<span class="c1"># =&gt; {&#34;cat&#34;=&gt;&#34;feline&#34;, &#34;dog&#34;=&gt;&#34;canine&#34;, &#34;cow&#34;=&gt;&#34;bovine&#34;} </span></code></pre></div>
<p>Well, I just found <code>value_at</code> at the bottom of the list
on Ruby&rsquo;s Hash object that does exactly what I want:</p>
<div class="highlight"><pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="n">h</span><span class="o">.</span><span class="n">values_at</span><span class="p">(</span><span class="s2">&#34;cow&#34;</span><span class="p">,</span> <span class="s2">&#34;cat&#34;</span><span class="p">)</span>  
<span class="c1">#=&gt; [&#34;bovine&#34;, &#34;feline&#34;]</span>

<span class="n">a</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&#34;cat&#34;</span><span class="p">,</span> <span class="s2">&#34;dog&#34;</span><span class="o">]</span>
<span class="n">cat</span><span class="p">,</span> <span class="n">dog</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">values_at</span><span class="p">(</span><span class="o">*</span><span class="n">a</span><span class="p">)</span></code></pre></div>
  </div>

  </body>
</html>
